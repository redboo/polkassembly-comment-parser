# Парсер комментариев Polkassembly

Данный скрипт предназначен для автоматизации процесса сбора данных о комментариях с сайтов на платформе [Polkassembly](https://polkassembly.io/)

## Установка

1. Установите [Python 3](https://practicum.yandex.ru/blog/kak-ustanovit-python-na-kompyuter/), если он еще не установлен на вашем компьютере.
2. Скачайте репозиторий с помощью команды [Git](https://git-scm.com/book/ru/v2/%D0%92%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5-%D0%A3%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0-Git) `git clone https://github.com/redboo/polkassembly-comment-parser.git` или скачайте [zip-архив](https://github.com/redboo/polkassembly-comment-parser/archive/refs/heads/main.zip) и распакуйте его.
3. Перейдите в директорию с исходным кодом `cd path/to/code`
4. Установите зависимости, запустив команду `pip install -r requirements.txt`.

## Использование

Для запуска парсера используйте команду:

```shell
python run.py [-h] [--url URL | --urls-file URLS_FILE] [--interval INTERVAL] [--start START] [--end END] [--log {DEBUG,INFO,WARNING,ERROR,CRITICAL}]

```

Аргументы:

- `--url`: адрес страницы для парсинга
- `--urls-file`: путь к файлу со списком адресов страниц для парсинга (должен быть в формате .txt)
- `--interval`: интервал в секундах для автоматического парсинга (необязательный)
- `--start`: начальная дата в формате ГГГГММДД, используется для фильтрации комментариев по дате (необязательный)
- `--end`: конечная дата в формате ГГГГММДД, используется для фильтрации комментариев по дате (необязательный)
- `--log`: уровень логирования (по умолчанию "WARNING"). Доступные уровни логирования:
  - `DEBUG`: наиболее подробное логирование, позволяющее отслеживать выполнение каждой операции в скрипте
  - `INFO`: информационные сообщения о ходе выполнения скрипта
  - `WARNING`: сообщения об ошибках, которые не прерывают выполнение скрипта
  - `ERROR`: сообщения об ошибках, которые прерывают выполнение скрипта
  - `CRITICAL`: сообщения о критических ошибках, которые прерывают выполнение скрипта и могут привести к серьезным проблемам.

Например, если вы хотите запускать скрипт каждые 24 часа и отфильтровать комментарии по начальной дате, используйте команду:

```shell
python run.py --interval 86400 --start 20230501
```

## Результаты

Результаты парсинга будут сохранены в директории `downloads/YYYY-MM-DD_HH-MM-SS` в файле `YYYY-MM-DD_HH-MM-SS_{network_name}.csv`, где `YYYY-MM-DD_HH-MM-SS` - текущее время в момент запуска парсера, а `network_name` - название поддомена сайта [polkassembly.io](https://polkassembly.io/).

## Обработка ошибок

В случае возникновения ошибок при выполнении скрипта, информация об этом будет выведена в терминал, а выполнение скрипта продолжится.

## Прерывание выполнения скрипта

Для прерывания выполнения скрипта можно воспользоваться комбинацией <kbd>CTRL</kbd>+<kbd>C</kbd>.
